@page
@model ProjectStation.Pages.ShopStuff.CheckoutModel
@{
    ViewData["Title"] = "Checkout";
    Layout = "~/Pages/ShopStuff/_Layout.cshtml";
}
@using Microsoft.Extensions.Options;
@inject IOptions<ProjectStation.Stripe.StripeSettings> Stripe



<div class="container">
    <div class="row">
        @*<form asp-page-handler="Charge" method="post">
            <script src="//checkout.stripe.com/v2/checkout.js"
                    class="stripe-button"
                    data-key="@Stripe.Value.PublishableKey"
                    data-description="test"
                    data-amount="500">

            </script>
            <label class="form-group row">

            </label>
        </form>*@
        <script src="https://js.stripe.com/v3"></script>
        
        <button id="checkout-button" value="@Model.Session.Id" style="margin-left:8px;" class="btn btn-success">Checkout</button>
    </div>
</div>
<script>
    var stripe = Stripe('pk_test_51HDwJsAIBd311jybUxWKurSnOIr2IsNw6bL2py7507Y02v73utS0Ilwn9spNHopwg3FkNjRjrRQUe81uwuO0QIcn009kRWulWp');
    var checkoutButton = document.getElementById('checkout-button');
    checkoutButton.addEventListener('click', function () {

        stripe.redirectToCheckout({
            sessionId: checkoutButton.value
        }).then(function (result) {

            result.error.message;
        });
    });</script>

